name: Playwright Tests
on:
 push:
   branches: [ main, master ]
 pull_request:
   branches: [ main, master ]
jobs:
 test:
   timeout-minutes: 60
   runs-on: ubuntu-latest
   env:
     USER_NAME: ${{ secrets.USER_NAME }}
     PASSWORD: ${{ secrets.PASSWORD }}
     SECRET_KEY: ${{ secrets.SECRET_KEY }}
     BASE_URL: ${{ secrets.BASE_URL }}
   steps:
     - name: Checkout code
       uses: actions/checkout@v4
     - name: Setup Node.js
       uses: actions/setup-node@v4
       with:
         node-version: lts/*
     - name: Install dependencies
       run: npm ci
     - name: Install Playwright Browsers
       run: npx playwright install --with-deps
     - name: Run Playwright tests
       run: |
         if [ ! -d "tests/login-module.spec.ts-snapshots" ]; then
           echo "ðŸ†• No snapshots found â€” generating baseline images..."
           npx playwright test --update-snapshots
         fi
         npx playwright test
     - name: Upload Playwright report
       if: ${{ !cancelled() }}
       uses: actions/upload-artifact@v4
       with:
         name: playwright-report
         path: playwright-report/
         retention-days: 30